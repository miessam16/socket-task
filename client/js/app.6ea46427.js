(function(e){function t(t){for(var r,o,u=t[0],i=t[1],c=t[2],p=0,m=[];p<u.length;p++)o=u[p],Object.prototype.hasOwnProperty.call(s,o)&&s[o]&&m.push(s[o][0]),s[o]=0;for(r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r]);l&&l(t);while(m.length)m.shift()();return a.push.apply(a,c||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],r=!0,u=1;u<n.length;u++){var i=n[u];0!==s[i]&&(r=!1)}r&&(a.splice(t--,1),e=o(o.s=n[0]))}return e}var r={},s={app:0},a=[];function o(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=r,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(n,r,function(t){return e[t]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var u=window["webpackJsonp"]=window["webpackJsonp"]||[],i=u.push.bind(u);u.push=t,u=u.slice();for(var c=0;c<u.length;c++)t(u[c]);var l=i;a.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"034f":function(e,t,n){"use strict";var r=n("85ec"),s=n.n(r);s.a},"0ebd":function(e,t,n){"use strict";var r=n("2b18"),s=n.n(r);s.a},1:function(e,t){},"2b18":function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("2b0e"),s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},a=[],o=(n("034f"),n("2877")),u={},i=Object(o["a"])(u,s,a,!1,null,null,null),c=i.exports,l=n("8c4f"),p=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",[n("p",[e._v(e._s(e.error))])]),n("form",{on:{submit:function(t){return e.login(t)}}},[n("div",{staticClass:"form-input"},[n("label",{attrs:{for:"username"}},[e._v("Username")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.username,expression:"username"}],attrs:{type:"text",name:"username",id:"username"},domProps:{value:e.username},on:{input:function(t){t.target.composing||(e.username=t.target.value)}}})]),n("div",{staticClass:"form-input"},[n("label",{attrs:{for:"password"}},[e._v("Password")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],attrs:{id:"password",type:"password",name:"password"},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}})]),n("button",{attrs:{type:"submit"},on:{click:function(t){return e.login(t)}}},[e._v("Login")]),n("router-link",{attrs:{id:"register-btn",to:"/register"}},[e._v("Register")])],1)])},m=[],d=n("bc3a"),f=n.n(d),g={API_URL:"http://localhost:3000/api/v1/",SOCKET_URL:"http://localhost:3000/messages"},v={name:"Login",data:function(){return{username:null,password:null,error:null}},methods:{login:function(e){var t=this;e.preventDefault(),f.a.post(g.API_URL+"users/login",{username:this.username,password:this.password}).then((function(e){localStorage.setItem("accessToken",e.data.accessToken),t.$router.push("chat")})).catch((function(e){t.error=e.response.data.message}))}}},h=v,b=(n("7d0c"),Object(o["a"])(h,p,m,!1,null,"580949a2",null)),w=b.exports,_=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"container"}},[n("table",{attrs:{border:"1px"}},[e._m(0),e._l(e.messages,(function(t){return n("tr",{key:t.id},[n("td",[e._v(e._s(t.username))]),n("td",[e._v(e._s(t.message))])])}))],2),n("div",{attrs:{id:"new-message"}},[n("form",{on:{submit:function(t){return e.sendMessage(t)}}},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.newMessage,expression:"newMessage"}],attrs:{type:"text",name:"message"},domProps:{value:e.newMessage},on:{input:function(t){t.target.composing||(e.newMessage=t.target.value)}}}),n("button",{attrs:{type:"submit"},on:{click:function(t){return e.sendMessage(t)}}},[e._v("Send")])])])])},y=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("tr",[n("th",{attrs:{colspan:"2"}},[e._v("Messages")])])}],k=n("8055"),x={name:"Chat",data:function(){return{messages:[],newMessage:null,socket:null}},methods:{sendMessage:function(e){var t=this;e.preventDefault(),0!==this.newMessage.length&&f.a.post(g.API_URL+"messages",{message:this.newMessage},{headers:{authorization:"Bearer ".concat(localStorage.getItem("accessToken"))}}).then((function(){t.newMessage=null}))}},created:function(){var e=this;f.a.get(g.API_URL+"messages",{headers:{authorization:"Bearer ".concat(localStorage.getItem("accessToken"))}}).then((function(t){e.messages=t.data.list})),this.socket=k(g.SOCKET_URL,{transportOptions:{polling:{extraHeaders:{authorization:localStorage.getItem("accessToken")}}}}),this.socket.on("new_message",(function(t){e.messages.unshift(t)}))}},P=x,O=(n("6963"),Object(o["a"])(P,_,y,!1,null,"21fe5f6c",null)),M=O.exports,S=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",[n("ul",e._l(e.errors,(function(t,r){return n("li",{key:r},[e._v(e._s(t))])})),0)]),n("form",{on:{submit:function(t){return e.login(t)}}},[n("div",{staticClass:"form-input"},[n("label",{attrs:{for:"username"}},[e._v("Username")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.username,expression:"username"}],attrs:{type:"text",name:"username",id:"username",required:""},domProps:{value:e.username},on:{input:function(t){t.target.composing||(e.username=t.target.value)}}})]),n("div",{staticClass:"form-input"},[n("label",{attrs:{for:"password"}},[e._v("Password")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],attrs:{id:"password",type:"password",name:"password",required:""},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}})]),n("button",{attrs:{type:"submit"},on:{click:function(t){return e.login(t)}}},[e._v("Register")])])])},T=[],j={name:"Register",data:function(){return{username:null,password:null,errors:null}},methods:{login:function(e){var t=this;e.preventDefault(),f.a.post(g.API_URL+"users/register",{username:this.username,password:this.password}).then((function(e){localStorage.setItem("accessToken",e.data.accessToken),t.$router.push("chat")})).catch((function(e){t.errors=e.response.data.message}))}}},I=j,R=(n("0ebd"),Object(o["a"])(I,S,T,!1,null,"0b91c6bf",null)),E=R.exports;r["a"].use(l["a"]);var L=[{path:"/",name:"Login",component:w,beforeEnter:function(e,t,n){var r=localStorage.getItem("accessToken");r?U.push("chat"):n()}},{path:"/register",name:"Register",component:E,beforeEnter:function(e,t,n){var r=localStorage.getItem("accessToken");r?U.push("chat"):n()}},{path:"/chat",name:"Chat",component:M,beforeEnter:function(e,t,n){var r=localStorage.getItem("accessToken");r?n():U.push("/")}}],U=new l["a"]({routes:L}),C=U;r["a"].config.productionTip=!1,new r["a"]({router:C,render:function(e){return e(c)}}).$mount("#app")},6963:function(e,t,n){"use strict";var r=n("ebb7"),s=n.n(r);s.a},"7d0c":function(e,t,n){"use strict";var r=n("cfe7"),s=n.n(r);s.a},"85ec":function(e,t,n){},cfe7:function(e,t,n){},ebb7:function(e,t,n){}});
//# sourceMappingURL=app.6ea46427.js.map